jQuery(function ($) {
  "use strict";
  var a = {
    init: function () {
      $(document.body).on("change", "#woocommerce_cepta_testmode", function () {
        var a = $("#woocommerce_cepta_test_secret_key").parents("tr").eq(0),
          b = $("#woocommerce_cepta_test_public_key").parents("tr").eq(0),
          c = $("#woocommerce_cepta_live_secret_key").parents("tr").eq(0),
          d = $("#woocommerce_cepta_live_public_key").parents("tr").eq(0);
        $(this).is(":checked")
          ? (a.show(), b.show(), c.hide(), d.hide())
          : (a.hide(), b.hide(), c.show(), d.show());
      }),
        $("#woocommerce_cepta_testmode").change(),
        $(document.body).on(
          "change",
          ".woocommerce_cepta_split_payment",
          function () {
            var a = $(".woocommerce_cepta_subaccount_code").parents("tr").eq(0),
              b = $(".woocommerce_cepta_split_payment_charge_account")
                .parents("tr")
                .eq(0),
              c = $(".woocommerce_cepta_split_payment_transaction_charge")
                .parents("tr")
                .eq(0);
            $(this).is(":checked")
              ? (a.show(), b.show(), c.show())
              : (a.hide(), b.hide(), c.hide());
          }
        ),
        $("#woocommerce_cepta_split_payment").change(),
        $(".wc-cepta-metadata")
          .change(function () {
            var a = $(
              ".wc-cepta-meta-order-id, .wc-cepta-meta-name, .wc-cepta-meta-email, .wc-cepta-meta-phone, .wc-cepta-meta-billing-address, .wc-cepta-meta-shipping-address, .wc-cepta-meta-products"
            ).closest("tr");
            $(this).is(":checked") ? a.show() : a.hide();
          })
          .change(),
        $(".wc-cepta-payment-channels")
          .on("change", function () {
            var a = $(".wc-cepta-payment-channels").val(),
              b = $(".wc-cepta-cards-allowed").closest("tr"),
              c = $(".wc-cepta-banks-allowed").closest("tr");
            -1 != $.inArray("card", a)
              ? (b.show(), c.show())
              : (b.hide(), c.hide());
          })
          .change(),
        $(".wc-cepta-payment-icons").select2({
          templateResult: b,
          templateSelection: c,
        }),
        $(
          "#woocommerce_cepta_test_secret_key, #woocommerce_cepta_live_secret_key"
        ).after(
          '<button class="wc-cepta-toggle-secret" style="height: 30px; margin-left: 2px; cursor: pointer"><span class="dashicons dashicons-visibility"></span></button>'
        ),
        $(
          "#woocommerce_cepta_test_public_key, #woocommerce_cepta_live_public_key"
        ).after(
          '<button class="wc-cepta-toggle-secret" style="height: 30px; margin-left: 2px; cursor: pointer"><span class="dashicons dashicons-visibility"></span></button>'
        ),
        $(".wc-cepta-toggle-secret").on("click", function (a) {
          a.preventDefault();
          let b = $(this).closest("button").find(".dashicons"),
            c = $(this).closest("tr").find(".input-text"),
            d = c.attr("type");
          "text" == d
            ? (c.attr("type", "password"),
              b.removeClass("dashicons-hidden"),
              b.addClass("dashicons-visibility"))
            : (c.attr("type", "text"),
              b.removeClass("dashicons-visibility"),
              b.addClass("dashicons-hidden"));
        }),
        $(".wc-cepta-toggle-public").on("click", function (a) {
          a.preventDefault();
          let b = $(this).closest("button").find(".dashicons"),
            c = $(this).closest("tr").find(".input-text"),
            d = c.attr("type");
          "text" == d
            ? (c.attr("type", "password"),
              b.removeClass("dashicons-hidden"),
              b.addClass("dashicons-visibility"))
            : (c.attr("type", "text"),
              b.removeClass("dashicons-visibility"),
              b.addClass("dashicons-hidden"));
        });
    },
  };
  function b(a) {
    return a.id
      ? $(
          `<span><img src=" ${
            wc_cepta_admin_params.plugin_url
          }/assets/images/${a.element.value.toLowerCase()}.png" class="img-flag" style="height: 15px; weight:18px;" /> ${
            a.text
          }</span>`
        )
      : a.text;
  }
  function c(a) {
    return a.text;
  }
  a.init();
});
